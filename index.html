<!doctype html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MIA Monitoraggio Adoption</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <style>
    :root {
      --bg: #f7f9fc;
      --panel: #ffffff;
      --border: #e7eaf3;
      --text: #1d2636;
      --muted: #66748a;
      --blue: #1b4ef0;
      --teal: #1fbad6;
      --green: #2bbf7f;
      --red: #dc3b3b;
      --orange: #ffb347;
      --gold: #f2c94c;
      --shadow: 0 12px 36px rgba(29, 38, 54, 0.08);
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .shell {
      max-width: 1300px;
      margin: 0 auto;
      padding: 32px 24px 64px;
      display: flex;
      flex-direction: column;
      gap: 26px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.3px;
    }

    header span { color: var(--muted); font-size: 14px; }

    .pill {
      padding: 8px 14px;
      border-radius: 999px;
      background: #eef3ff;
      color: var(--blue);
      font-weight: 700;
      font-size: 13px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px 20px;
    }

    .grid { display: grid; gap: 16px; }
    .grid.cols-3 { grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); }
    .grid.cols-2 { grid-template-columns: 2fr 1.1fr; }
    .grid.cols-2.tight { grid-template-columns: 1.1fr 1fr; }

    .kpi-label { text-transform: uppercase; letter-spacing: 0.6px; color: var(--muted); font-weight: 700; font-size: 12px; }
    .kpi-value { font-size: 38px; font-weight: 800; margin: 10px 0 6px; }
    .kpi-diff { font-size: 14px; font-weight: 700; }
    .kpi-diff.positive { color: var(--green); }
    .kpi-diff.negative { color: var(--red); }

    .section-title { display: flex; gap: 10px; align-items: center; font-weight: 800; margin: 6px 0 12px; }
    .section-title::before { content: ''; width: 6px; height: 22px; border-radius: 12px; background: linear-gradient(180deg, var(--blue), var(--teal)); }

    canvas { width: 100%; height: auto; }

    .legend { display: grid; gap: 6px; grid-template-columns: repeat(2, minmax(0, 1fr)); margin-top: 10px; }
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--muted); }
    .dot { width: 12px; height: 12px; border-radius: 4px; }

    .footer-note { font-size: 12px; color: var(--muted); margin-top: 6px; }

    .card { display: flex; flex-direction: column; gap: 6px; }

    .feedback-wrap { display: grid; gap: 18px; grid-template-columns: 0.8fr 2fr; align-items: stretch; }
    .feedback-badge { display: flex; flex-direction: column; gap: 10px; align-items: center; justify-content: center; text-align: center; padding: 24px; background: #e8efff; border-radius: var(--radius); border: 1px solid #d3ddf8; }
    .feedback-badge .value { font-size: 46px; font-weight: 800; color: var(--blue); }
    .feedback-badge .delta { font-size: 14px; font-weight: 700; color: var(--red); }
    .feedback-badge .note { font-size: 13px; color: var(--muted); max-width: 220px; }

    table { width: 100%; border-collapse: collapse; }
    th { text-align: left; color: var(--muted); font-size: 12px; letter-spacing: 0.5px; padding-bottom: 10px; }
    td { padding: 10px 8px; border-top: 1px solid var(--border); font-size: 14px; vertical-align: top; }
    td strong { display: block; margin-bottom: 4px; }
    .status { font-weight: 800; font-size: 12px; letter-spacing: 0.5px; padding: 6px 10px; border-radius: 10px; display: inline-block; }
    .status.ongoing { background: #fff4e5; color: #d37b00; border: 1px solid #ffd9a1; }
    .status.done { background: #e7f7ef; color: var(--green); border: 1px solid #bdebd4; }

    .placeholder { height: 240px; display: grid; place-items: center; color: #b4bfd3; background: linear-gradient(135deg, #eff4ff, #f6f9ff); border: 1px dashed #d1dbee; border-radius: var(--radius); font-weight: 800; letter-spacing: 1px; text-transform: uppercase; }

    @media (max-width: 980px) {
      .grid.cols-2, .grid.cols-2.tight, .feedback-wrap { grid-template-columns: 1fr; }
      header { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <div>
        <h1>MIA Monitoraggio Adoption</h1>
        <span>Periodo: ultimo aggiornamento 20 gennaio</span>
      </div>
    </header>

    <section class="panel">
      <div class="grid cols-2">
        <div class="grid" style="gap: 12px;">
          <div class="grid cols-3">
            <div class="card">
              <span class="kpi-label">Utenti unici</span>
              <div class="kpi-value">988</div>
            </div>
            <div class="card">
              <span class="kpi-label">Interazioni</span>
              <div class="kpi-value">25140</div>
            </div>
            <div class="card">
              <span class="kpi-label">Sessioni</span>
              <div class="kpi-value">3600</div>
            </div>
          </div>

          <div>
            <div class="section-title">Andamento utenti</div>
            <canvas id="trendChart" height="260" aria-label="Grafico andamento utenti" role="img"></canvas>
          </div>
        </div>

        <div class="panel" style="padding: 16px;">
          <canvas id="usagePieChart" aria-label="Ripartizione tipologie di utilizzo" role="img"></canvas>
          <div class="legend">
            <div class="legend-item"><span class="dot" style="background:#5f6b78"></span>50% Generiche</div>
            <div class="legend-item"><span class="dot" style="background:#e44f5a"></span>24% Interrogazione documentale</div>
            <div class="legend-item"><span class="dot" style="background:#f2c94c"></span>7% Generazione immagini</div>
            <div class="legend-item"><span class="dot" style="background:#61c2c0"></span>6% Summarization</div>
            <div class="legend-item"><span class="dot" style="background:#5ad47f"></span>6% Drafting</div>
            <div class="legend-item"><span class="dot" style="background:#3e9dec"></span>4% Creazione</div>
            <div class="legend-item"><span class="dot" style="background:#7d67ff"></span>3% Comparazione</div>
          </div>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="section-title">Feedback negativi su 25.140 interazioni</div>
      <div class="feedback-wrap">
        <div class="feedback-badge">
          <div class="value">92</div>
          <div class="note">Interazioni negative rispetto alle interazioni totali</div>
        </div>

        <div class="table-wrap">
          <table aria-label="Tabella remediation">
            <thead>
              <tr>
                <th style="width: 12%;">Distribuzione %</th>
                <th style="width: 34%;">Categoria</th>
                <th style="width: 40%;">Remediation</th>
                <th style="width: 14%;">Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>36%</strong></td>
                <td>Feedback qualitativi </td>
                <td><strong>Benchmarking latest LLM</strong></td>
                <td><span class="status ongoing">ONGOING</span></td>
              </tr>
              <tr>
                <td><strong>30%</strong></td>
                <td>Elaborazione di file Excel</td>
                <td><strong>Enhance della funzionalità</strong></td>
                <td><span class="status ongoing">ONGOING</span></td>
              </tr>
              <tr>
                <td><strong>4%</strong></td>
                <td>Qualità delle immagini</td>
                <td><strong>Enhancing latest LLM</strong></td>
                <td><span class="status ongoing">ONGOING</span></td>
              </tr>
              <tr>
                <td><strong>10%</strong></td>
                <td>Creazione di documenti</td>
                <td><strong>Rinforzo su prompt di sistema MIA</strong></td>
                <td><span class="status done">RISOLTO</span></td>
              </tr>
              <tr>
                <td><strong>9%</strong></td>
                <td>Domande sulla intranet</td>
                <td><strong>Rinforzo su prompt di sistema MIA con data rilascio KB</strong></td>
                <td><span class="status done">RISOLTO</span></td>
              </tr>
              <tr>
                <td><strong>7%</strong></td>
                <td>Restituzione risposta errore di sistema</td>
                <td><strong>Bug di sistema da correggere in produzione</strong></td>
                <td><span class="status done">RISOLTO</span></td>
              </tr>
              <tr>
                <td><strong>4%</strong></td>
                <td>Ricerca Web non attivata</td>
                <td><strong>Enhancing sub-agent di ricerca web</strong></td>
                <td><span class="status done">RISOLTO</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="grid cols-3">
        <div class="card">
          <span class="kpi-label">Infrastruttura (costo medio mensile)*</span>
          <div class="kpi-value">$1313</div>
        </div>
        <div class="card">
          <span class="kpi-label">Variabile (token modelli)</span>
          <div class="kpi-value">$188</div>
        </div>
        <div class="card">
          <span class="kpi-label">Unitario (1000 token)</span>
          <div class="kpi-value">$0,005</div>
        </div>
      </div>

      <div class="grid cols-2 tight" style="margin-top: 14px; align-items: center;">
        <div>
          <div class="section-title">Consumo mensile (spesa variabile)</div>
          <div class="placeholder" aria-label="Prossimo aggiornamento consumo">Next update</div>
          <div class="footer-note">*calcolato sul billing nov-dic</div>
        </div>
        <div class="panel" style="padding: 16px;">
          <canvas id="modelCostChart" height="260" aria-label="Ripartizione costo per modello" role="img"></canvas>
        </div>
      </div>
    </section>
  </div>

  <script>
    Chart.register(ChartDataLabels);

    const trendCtx = document.getElementById('trendChart');
    const usagePieCtx = document.getElementById('usagePieChart');
    const modelCostCtx = document.getElementById('modelCostChart');

    const trendData = {
      labels: ['25/11 - 27/11', '28/11 - 2/12', '3/12 - 9/12', '10/12 - 16/12', '17/12 - 8/01', '9/01 - 18/01', '19/01 - 28/01'],
      datasets: [
        {
          label: 'Utenti rientranti',
          data: [0, 162, 187, 242, 416, 283, 412],
          backgroundColor: '#ccd3e5',
          borderRadius: 10,
          barThickness: 32
        },
        {
          label: 'Utenti nuovi',
          data: [445, 74, 92, 262, 84, 52, 60],
          backgroundColor: '#1b4ef0',
          borderRadius: 10,
          barThickness: 32
        }
      ]
    };

    new Chart(trendCtx, {
      type: 'bar',
      data: trendData,
      options: {
        responsive: true,
        scales: {
          x: {
            stacked: true,
            grid: { display: false },
            ticks: { color: '#66748a', font: { size: 12 } }
          },
          y: {
            stacked: true,
            grid: { color: '#eef1f6' },
            ticks: {
              color: '#66748a',
              stepSize: 100,
              callback: (value) => value
            }
          }
        },
        plugins: {
          legend: { display: false },
          datalabels: {
            color: '#ffffff',
            anchor: 'end',
            align: 'start',
            offset: -4,
            font: { weight: '700', size: 12 },
            formatter: (value) => (value ? value : '')
          }
        }
      }
    });

    const usageData = [50, 24, 7, 6, 6, 4, 3];

    new Chart(usagePieCtx, {
      type: 'doughnut',
      data: {
        labels: [
          'Generiche',
          'Interrogazione documentale',
          'Generazione immagini',
          'Summarization',
          'Drafting',
          'Creazione',
          'Comparazione'
        ],
        datasets: [
          {
            data: usageData,
            backgroundColor: ['#5f6b78', '#e44f5a', '#f2c94c', '#61c2c0', '#5ad47f', '#3e9dec', '#7d67ff'],
            borderWidth: 2,
            borderColor: '#ffffff'
          }
        ]
      },
      options: {
        cutout: '62%',
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
          datalabels: {
            color: '#1d2636',
            font: { weight: '800', size: 12 },
            formatter: (value) => value + '%'
          }
        }
      }
    });

    const modelCostData = [42, 46, 11, 1];

    new Chart(modelCostCtx, {
      type: 'doughnut',
      data: {
        labels: ['GPT 4.1 MINI', 'GPT 4.1', 'IMAGE 1', 'WHISPER'],
        datasets: [
          {
            data: modelCostData,
            backgroundColor: ['#58d3ff', '#8c7bff', '#2ee6a8', '#ffae63'],
            borderWidth: 2,
            borderColor: '#ffffff'
          }
        ]
      },
      options: {
        cutout: '58%',
        plugins: {
          legend: {
            position: 'bottom',
            labels: { color: '#66748a', boxWidth: 12, padding: 12, font: { size: 12, weight: '700' } }
          },
          tooltip: { enabled: false },
          datalabels: {
            color: '#1d2636',
            font: { weight: '800', size: 12 },
            formatter: (value) => value + '%'
          }
        }
      }
    });
  </script>
</body>
</html>
